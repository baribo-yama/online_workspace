# UI仕様書

## 1. ホームページ (`src/study-room/components/HomePage.jsx`)

- **目的:** ユーザーがアプリケーションにアクセスした際の最初のエントリーポイント。既存の学習ルームへの参加、または新しいルームの作成をスムーズに行えるようにする。
- **主要コンポーネント:**
    - **ヘッダー/ナビゲーションバー:**
        - アプリケーションのロゴを表示。
        - （将来的な拡張）ログイン/ユーザー情報表示エリア。
    - **ルーム作成フォーム (`CreateRoomForm.jsx`):**
        - **入力フィールド:**
            - ルーム名 (`roomName`): ユーザーが新しいルームの名前を入力する。
            - ユーザー名 (`userName`): ユーザーがルーム内で使用する名前を入力する。
        - **アクション:**
            - 「ルームを作成」ボタン: 新しいルームを生成し、ルームページに遷移する。
    - **ルーム一覧 (`RoomList.jsx`):**
        - **表示内容:**
            - 現在アクティブなルームのリストをカード形式で表示。
            - 各カードにはルーム名、現在の参加者数を表示する。
        - **アクション:**
            - 「入室」ボタン: ユーザー名入力後、選択したルームのルームページに遷移する。
- **状態管理 (State):**
    - `rooms`: Firestoreなどから取得したルーム一覧データ。
    - `roomName`: 新規作成フォームのルーム名入力値。
    - `userName`: 入室/作成フォームのユーザー名入力値。
    - `isLoading`: ルームデータ取得中のローディング状態。
- **ルーティング:**
    - パス: `/`
    - ルーム作成/入室後: `/:roomId` にリダイレクト。

## 2. ルームページ (`src/study-room/components/RoomPage.jsx`)

- **目的:** ユーザーがビデオ通話、共同作業、コミュニケーションを行うためのメインワークスペース。
- **レイアウト:**
    - 主要なエリアにビデオ通話画面を配置。
    - サイドバーまたはオーバーレイに参加者一覧、タイマー、ゲームなどの補助機能を配置。
- **主要コンポーネント:**
    - **2.1. ビデオ通話画面 (`src/components/VideoCallRoom.jsx`):**
        - **機能:**
            - LiveKit SDKと連携し、参加者のビデオと音声ストリームを表示。
            - グリッドレイアウトで参加者を均等に表示。
            - アクティブスピーカーをハイライトする機能。
        - **UIコントロール:**
            - マイクのミュート/アンミュートボタン。
            - カメラのオン/オフボタン。
            - 画面共有ボタン。
            - 通話からの退出ボタン。
    - **2.2. 参加者一覧 (`src/collaboration/components/ParticipantList.jsx`):**
        - **表示内容:**
            - 現在のルーム参加者のリストを表示。
            - 各参加者の名前と、マイク/カメラのステータスをアイコンで表示。
    - **2.3. 強化版ポモドーロタイマー (`src/components/EnhancedPomodoroTimer.jsx`):**
        - **機能:**
            - 「共有モード」と「個人モード」を切り替えるタブまたはスイッチ。
        - **共有タイマー (`src/pomodoro-timer/components/SharedTimer.jsx`):**
            - WebSocketまたはFirestore Realtime Updatesを利用して、全参加者のタイマー状態を同期。
            - 作業時間、休憩時間、セッション数を設定可能。
            - 開始/一時停止/リセットのコントロールは、特定の権限を持つユーザー（例: ルーム作成者）のみ操作可能か、全員が操作可能かを選択できる。
        - **個人タイマー (`src/pomodoro-timer/components/PersonalTimer.jsx`):**
            - 他のユーザーとは同期しない、ローカルなタイマー。
            - `usePersonalTimer.js` フックで状態管理。
    - **2.4. 顔認識ミニゲーム (`src/entertainment/components/FaceObstacleGame.jsx`):**
        - **機能:**
            - `face-api.js` などのライブラリを使用してユーザーの顔を検出。
            - 画面上から降ってくる障害物を、顔を動かして避けるゲーム。
            - ゲームの開始/終了をコントロールするボタン。
        - **表示:**
            - ゲーム画面はオーバーレイとして表示、または画面の一角に表示。
            - スコア表示。
- **状態管理 (State):**
    - `room`: 現在のルーム情報（ID, 名前など）。
    - `participants`: LiveKitから取得した参加者情報。
    - `isMicMuted`, `isCameraOff`: ユーザー自身のメディアデバイスの状態。
    - `timerMode`: `'shared'` または `'personal'`。
    - `isGameActive`: ゲームが実行中かどうかのフラグ。
- **ルーティング:**
    - パス: `/:roomId`
