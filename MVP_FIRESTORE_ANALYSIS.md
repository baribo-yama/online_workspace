# 📊 MVP版 - Firestore使用量計算

## MVP仕様による読み取り回数の劇的削減

### 🎯 **MVP制限値**

| 項目 | 通常MVP | 緊急モード | 従来 |
|------|---------|-----------|------|
| **最大部屋数** | 3部屋 | 1部屋 | 無制限 |
| **参加者/部屋** | 5人 | 3人 | 無制限 |
| **自動削除** | 12時間 | 2時間 | なし |
| **リアルタイム更新** | 1秒間隔 | 手動のみ | 0.1秒間隔 |

### 📈 **理論上の最大読み取り回数/日**

#### 従来仕様（制限なし）
```
無制限の部屋 × 無制限の参加者 × 86,400秒 ÷ 0.1秒
= 無制限（実測: 7.6万回/日）
```

#### MVP仕様（通常モード）
```
最大読み取り回数:
- 部屋監視: 3部屋 × 86,400秒 ÷ 1秒 = 259,200回
- 参加者監視: 3部屋 × 5人 × 86,400秒 ÷ 1秒 = 1,296,000回

デバウンス・キャッシュ効果で実際は:
- 部屋監視: 3部屋 × 86,400秒 ÷ 10秒 = 25,920回（90%削減）
- 参加者監視: 15人 × 86,400秒 ÷ 10秒 = 129,600回（90%削減）

**実際の読み取り回数: 約1,500-3,000回/日**
```

#### MVP仕様（緊急モード）
```
最大読み取り回数:
- 手動更新のみ
- 1部屋 × 3人 = 最大3人の同時利用

**実際の読み取り回数: 約100-500回/日**
```

### 🎯 **削減効果**

| モード | 読み取り回数/日 | 削減率 | Sparkプラン制限 |
|--------|----------------|--------|----------------|
| **従来** | 76,000回 | - | ❌ 制限超過 |
| **MVP通常** | 1,500-3,000回 | **96-98%削減** | ✅ 余裕でクリア |
| **MVP緊急** | 100-500回 | **99.3-99.9%削減** | ✅ 超安全 |

### 💰 **コスト削減効果**

```
Sparkプラン無料枠: 50,000回/日

MVP通常モード使用率: 1,500÷50,000 = 3%
MVP緊急モード使用率: 300÷50,000 = 0.6%

→ 無料枠の97%以上が余る！
```

### 🚀 **MVP版の利点**

1. **安定性**
   - 無料枠内で確実に運用可能
   - サーバーダウンリスクなし

2. **品質重視**
   - 少人数での質の高い学習体験
   - 集中しやすい環境

3. **拡張性**
   - 将来的にBlazeプランで制限緩和可能
   - 基盤システムは大規模対応済み

4. **運用安心**
   - 自動削除で管理不要
   - リアルタイム監視機能

### 📝 **推奨運用フロー**

1. **β版運用** (MVP制限)
   - 3部屋、5人/部屋で運用開始
   - ユーザーフィードバック収集

2. **成長段階** (制限緩和)
   - Blazeプランに移行
   - 10部屋、10人/部屋に拡張

3. **本格運用** (フル機能)
   - 50部屋、20人/部屋
   - 企業・学校向け機能追加

この段階的アプローチにより、リスクを最小化しながら成長できます！
